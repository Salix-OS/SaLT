source ${cfgprefix}/include.cfg

set default=1
initmenu

loadlocales

# MENU
menuentry "${Lchangekb}" --hotkey k {
  configfile ${cfgprefix}/keyboard.cfg
}

menuentry "${Lstart}" --hotkey b {
  load_video
  echo "${Lliveloading}"
  linux /boot/vmlinuz root=/dev/ram0 quiet autologin lang=${locale} keyb=${kb} ${runlevel} ${toram} ${numlock} ${synaptics} ${env} ${debug}
  initrd /boot/initrd.gz
}

menuentry "${Lcheatcode}" --hotkey o {
  configfile ${cfgprefix}/cheatcode.cfg
}

menuentry "${Lmemtest}" --hotkey m {
  linux16 /boot/mt86p
}

menuentry "${Lchangelang}" --hotkey l {
  configfile ${cfgprefix}/lang.cfg
}

menuentry "${Lsavesettings}" --hotkey s {
  unset skiplang
  while true; do
    echo -n "${Lskiplang}"
    read answer
    echo
    if [ "x$answer" = "x${Lyes}" ]; then
      skiplang=true
      break;
    elif [ "x$answer" = "x${LYES}" ]; then
      skiplang=true
      break;
    elif [ "x$answer" = "x${Lno}" ]; then
      break;
    elif [ "x$answer" = "x${LNO}" ]; then
      break;
    elif [ "x$answer" = "x" ]; then
      break;
    else
      echo "${Linvalrep}"
    fi
  done
  
  save_env -f ${cfgprefix}/salt.env locale lang langnum kb kbnum \
    toram env runlevel numlock synaptics debug gfxpayload \
    skiplang

  if [ "x$?" != "x0" ]; then
    echo "${Lsaveenverr}"
  fi
}
# MENU END
