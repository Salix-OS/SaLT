# vim: syn=sh et sw=2 st=2 ts=2 tw=0:
# Support booting as specified by loopback.cfg
if [ -n "$iso_path" ]; then
  set fromiso="fromiso=$iso_path"
fi

unset chosen
set default=0
set timeout=30
unset title
menuclear

gettextvar Lmenutitle "Start _DISTRONAME_"
menuentry "$Lmenutitle" --class=salix --class=gnu-linux {
  load_video
  gettext "Live system is loading..."
  linux $basedir/boot/vmlinuz root=/dev/ram0 quiet max_loop=20 $salt_debug lang=$salt_locale keyb=$salt_kb timezone=$salt_timezone hwclock=$salt_hwclock $salt_autologin $salt_fromiso $salt_ibus $salt_memonly $salt_numlock $salt_passwd $salt_proxy $salt_runlevel $salt_synaptics $salt_custom
  initrd $basedir/boot/initrd.gz
}

gettextvar Lmenutitle "Change boot options"
menuentry "$Lmenutitle" --class=preferences {
  source ${cfgprefix}/cheatcode.cfg
}

gettextvar Lmenutitle "Change time zone"
set Lmenutitle="$Lmenutitle [$salt_timezone]"
menuentry "$Lmenutitle" --class=clock {
  source ${cfgprefix}/timezone.cfg
}

gettextvar Lmenutitle "Change language"
set Lmenutitle="$Lmenutitle [$salt_locale]"
menuentry "$Lmenutitle" --class=locale {
  source ${cfgprefix}/lang.cfg
}

gettextvar Lmenutitle "Change keyboard layout"
set Lmenutitle="$Lmenutitle [$salt_kb]"
menuentry "$Lmenutitle" --class=keyboard {
  source $cfgprefix/keyboard.cfg
}

gettextvar Lmenutitle "Save all settings to be autoloaded for future boots"
menuentry "$Lmenutitle" --class=save {
  savesettings
}

gettextvar Lmenutitle "Memory Test"
menuentry "$Lmenutitle" --class=monitor {
  linux16 $basedir/boot/mt86p
}

gettextvar Lmenutitle "Reboot"
menuentry "$Lmenutitle" --class=reboot {
  reboot
}

gettextvar Lmenutitle "Power off"
menuentry "$Lmenutitle" --class=shutdown {
  halt
}
